{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "3d-carousel",
  "type": "registry:block",
  "title": "3d Carousel",
  "description": "3d Carousel component variant",
  "files": [
    {
      "path": "src/components/showcase/carousel/3d-carousel.tsx",
      "content": "\"use client\";\r\n\r\nimport { startTransition, useEffect, useRef, useState } from \"react\";\r\nimport {\r\n  Carousel,\r\n  CarouselContent,\r\n  CarouselItem,\r\n  CarouselNext,\r\n  CarouselPrevious,\r\n  type CarouselApi,\r\n} from \"@/components/ui/carousel\";\r\n\r\ntype CarouselItemType = {\r\n  id: number;\r\n  image: string;\r\n  title?: string;\r\n};\r\n\r\nconst carouselItems: CarouselItemType[] = [\r\n  {\r\n    id: 1,\r\n    title: \"image1\",\r\n    image: \"/assets/carousel1.jpg\",\r\n  },\r\n  {\r\n    id: 2,\r\n    title: \"image2\",\r\n    image: \"/assets/carousel2.jpg\",\r\n  },\r\n  {\r\n    id: 3,\r\n    title: \"image3\",\r\n    image: \"/assets/carousel3.jpg\",\r\n  },\r\n  {\r\n    id: 4,\r\n    title: \"image4\",\r\n    image: \"/assets/carousel4.jpg\",\r\n  },\r\n  {\r\n    id: 5,\r\n    title: \"image5\",\r\n    image: \"/assets/carousel5.jpg\",\r\n  },\r\n  {\r\n    id: 6,\r\n    title: \"image6\",\r\n    image: \"/assets/carousel6.jpg\",\r\n  },\r\n  {\r\n    id: 7,\r\n    title: \"image7\",\r\n    image: \"/assets/carousel7.jpg\",\r\n  },\r\n];\r\n\r\nconst ThreeDCarousel = () => {\r\n  const [api, setApi] = useState<CarouselApi>();\r\n  const [current, setCurrent] = useState(0);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [dragRotation, setDragRotation] = useState(0); // Real-time rotation offset\r\n  const dragStartX = useRef(0);\r\n  const dragStartRotation = useRef(0);\r\n\r\n  const quantity = carouselItems.length;\r\n  const anglePerItem = 360 / quantity;\r\n  const radius = 300; // Distance from center\r\n\r\n  useEffect(() => {\r\n    if (!api) {\r\n      return;\r\n    }\r\n\r\n    startTransition(() => {\r\n      setCurrent(api.selectedScrollSnap());\r\n    });\r\n\r\n    api.on(\"select\", () => {\r\n      setCurrent(api.selectedScrollSnap());\r\n    });\r\n  }, [api]);\r\n\r\n  // Calculate current rotation angle\r\n  const baseRotation = -current * anglePerItem;\r\n  const currentRotation = isDragging ? dragRotation : baseRotation;\r\n\r\n  // Handle drag start\r\n  const handleDragStart = (clientX: number) => {\r\n    setIsDragging(true);\r\n    dragStartX.current = clientX;\r\n    dragStartRotation.current = baseRotation;\r\n    setDragRotation(baseRotation);\r\n  };\r\n\r\n  // Handle drag move - smooth real-time rotation\r\n  const handleDragMove = (clientX: number) => {\r\n    if (!isDragging) return;\r\n\r\n    const deltaX = clientX - dragStartX.current;\r\n    // Convert pixels to degrees (adjust sensitivity with divisor)\r\n    const rotationDelta = deltaX * 0.3;\r\n    setDragRotation(dragStartRotation.current + rotationDelta);\r\n  };\r\n\r\n  // Handle drag end - snap to nearest card\r\n  const handleDragEnd = () => {\r\n    if (!isDragging) return;\r\n\r\n    // Calculate which card we're closest to\r\n    const normalizedRotation = ((dragRotation % 360) + 360) % 360;\r\n    const nearestIndex =\r\n      Math.round(normalizedRotation / anglePerItem) % quantity;\r\n    const targetIndex = (quantity - nearestIndex) % quantity;\r\n\r\n    api?.scrollTo(targetIndex);\r\n    setIsDragging(false);\r\n  };\r\n\r\n  // Mouse events\r\n  const handleMouseDown = (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    handleDragStart(e.clientX);\r\n  };\r\n\r\n  const handleMouseMove = (e: React.MouseEvent) => {\r\n    handleDragMove(e.clientX);\r\n  };\r\n\r\n  const handleMouseUp = () => {\r\n    handleDragEnd();\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    if (isDragging) handleDragEnd();\r\n  };\r\n\r\n  // Touch events\r\n  const handleTouchStart = (e: React.TouchEvent) => {\r\n    handleDragStart(e.touches[0].clientX);\r\n  };\r\n\r\n  const handleTouchMove = (e: React.TouchEvent) => {\r\n    handleDragMove(e.touches[0].clientX);\r\n  };\r\n\r\n  const handleTouchEnd = () => {\r\n    handleDragEnd();\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full max-w-4xl mx-auto p-8\">\r\n      <Carousel setApi={setApi} opts={{ align: \"center\", loop: true }}>\r\n        {/* 3D Carousel Display */}\r\n        <div\r\n          className=\"relative h-96 w-full flex items-center justify-center select-none\"\r\n          style={{ perspective: \"1000px\" }}\r\n          onMouseDown={handleMouseDown}\r\n          onMouseMove={handleMouseMove}\r\n          onMouseUp={handleMouseUp}\r\n          onMouseLeave={handleMouseLeave}\r\n          onTouchStart={handleTouchStart}\r\n          onTouchMove={handleTouchMove}\r\n          onTouchEnd={handleTouchEnd}\r\n        >\r\n          <div\r\n            className={`relative w-52 h-72 ${\r\n              isDragging ? \"\" : \"transition-transform duration-500 ease-out\"\r\n            }`}\r\n            style={{\r\n              transformStyle: \"preserve-3d\",\r\n              transform: `rotateY(${currentRotation}deg)`,\r\n              cursor: isDragging ? \"grabbing\" : \"grab\",\r\n            }}\r\n          >\r\n            {carouselItems.map((item, index) => (\r\n              <div\r\n                key={item.id}\r\n                className=\"absolute inset-0\"\r\n                style={{\r\n                  transform: `rotateY(${\r\n                    index * anglePerItem\r\n                  }deg) translateZ(${radius}px)`,\r\n                }}\r\n              >\r\n                <div className=\"w-full h-full overflow-hidden rounded-lg shadow-xl\">\r\n                  <img\r\n                    src={item.image}\r\n                    alt={item.title}\r\n                    className=\"w-full h-full object-cover\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Hidden carousel content for navigation control */}\r\n        <CarouselContent className=\"hidden\">\r\n          {carouselItems.map((item) => (\r\n            <CarouselItem key={item.id}>\r\n              <div />\r\n            </CarouselItem>\r\n          ))}\r\n        </CarouselContent>\r\n\r\n        {/* Navigation Controls */}\r\n        <CarouselPrevious className=\"left-4\" />\r\n        <CarouselNext className=\"right-4\" />\r\n      </Carousel>\r\n\r\n      {/* Slide Indicators */}\r\n      <div className=\"flex justify-center mt-6 gap-2\">\r\n        {carouselItems.map((_, index) => (\r\n          <button\r\n            key={index}\r\n            onClick={() => api?.scrollTo(index)}\r\n            className={`w-2 h-2 rounded-full transition-all duration-300 ${\r\n              index === current\r\n                ? \"bg-primary scale-125\"\r\n                : \"bg-muted-foreground/30 hover:bg-muted-foreground/50\"\r\n            }`}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport { ThreeDCarousel }",
      "type": "registry:component",
      "target": "components/3d-carousel.tsx"
    }
  ],
  "categories": [
    "carousel",
    "carousel"
  ],
  "registryDependencies": [
    "carousel"
  ]
}